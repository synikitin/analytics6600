---
title: "Functions and Iteration"
author: "Slava Nikitin"
date: "2017-03-20"
abstract: ""
abstract_short: ""
authors: []
image: ""
image_preview: ""
math: true
publication_types: []
publication: ""
publication_short: ""
selected: false
url_code: ""
url_dataset: "https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/download/train.json.zip"
url_pdf: ""
url_project: "https://www.kaggle.com/c/two-sigma-connect-rental-listing-inquiries/data"
url_slides: ""
url_video: ""
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = "~/Documents/training/class/data/train.json/")
```


```{r echo = FALSE, message=FALSE, warning=FALSE, eval = FALSE}
library(json)
library(ggplot2)
library(xgboost)
library(topicmodels)
library(dplyr)
library(tidyr)
library(tidytext)
library(purrr)
library(tibble)
library(stringr)
library(cognizer)
```

## **Learning Objectives**
- Package loading
- Data import
- Data clean up
- Data manipulation
- Piping
- Functions
- Data structurs: vectors, lists, data frames
- Iteration
- Watson API services

## **Context**
To practice programming concepts, we will use a data set from a kaggle competition. [renthop.com](renthop.com) is a service for listing and searching for apartments. For each apartment, there is information about the bedrooms, bathrooms, pricing, and interest level, based on how many views a listing got when it was opened. In addition to numerical data, there is also text describing features of an apartment and images showing the decor, data that will require special treatment and provide new learning opportunities.

How much interest will a new rental listing on RentHop receive? This question motivates the competition, and will guide this and the last assignment. This assignment will be about data import, clean up, manipulation, interacting with an api, assisted by functions and iteration; the second part will cover predictive modeling that will involve taking all variables we have and using them to predict interest level to figure what makes for a good rental listing.

## **Data Import** 
Start by creating a project folder. Use the dataset link to obtain data; then move it to your project folder. Data is somewhat large, and has been compressed with zip algorithm. Assuming you moved downloaded data to your project folder, use the following R code to unzip it:
```
unzip("test.json.zip")
```
If the code does not work, you could try to do it manually with WinZip on Windows or Archive Utility on Mac. Once you unzipped, you should see a test.json file - make sure you do before proceeding. .json file is a popular storage format to transport data over the internet, and requires a special package and function to import it into R.
Run the following commands to get the required package and load it,
```
install.packages("jsonlite")
library(jsonlite)
```
and then run the following command to read the data into R,
```
train_raw <- fromJSON("train.json")
```

## **Data Cleanup**
You should see a pretty large list. Explore it using these commands,
```
typeof(train_raw)
names(train_raw)
str(train_raw)
```
While `fromJSON` created a list, our data can be conveniently stored as a data frame, with each row being a listing and each column being some part of that listing. The only novel aspect of this data is how to handle *features* and *photos* because unlike standard column that have a single value per cell, apartment listings can have multiple features or photos, hence we need to somehow store a vector of multiple values in a single cell of a data frame.

Recall that data frames are made out of lists, and that lists can have lists inside of them and that components of a list can be vectors with multiple values of the same type. This means that a data frame can have a list column and allows us to store multiple features and photo urls in a single cell of a data frame.


  
**Dont forget to put all your code into Rmarkdown and test that all of it runs without errors to produce an html file that contains your answers. Good luck!**   
